<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>íšŒì›ê°€ì…</title>
  <link rel="stylesheet" href="/user/css/sign_up.css"/>
</head>
<body>
<main class="card" role="main" aria-labelledby="signupTitle">
  <section class="signup-form" aria-labelledby="signupTitle">
    <div class="brand" aria-hidden="true">
      <img class="logo" alt="coupang-eats" src="/image/coupang-eats-logo.png">
    </div>

    <h1 id="signupTitle">íšŒì›ê°€ì…</h1>
    <p class="lead">ì•„ë˜ ì •ë³´ë¥¼ ì…ë ¥í•´ ê³„ì •ì„ ìƒì„±í•˜ì„¸ìš”.</p>

    <form action="/signup" method="POST" enctype="multipart/form-data" onkeydown="return event.key !== 'Enter';" novalidate>
      <input type="hidden" th:name="${_csrf?.parameterName}" th:value="${_csrf?.token}" />
      <div class="grid">
        <!-- ì´ë¦„ -->
        <div class="col-1">
          <label for="name">ì´ë¦„ <span style="color:#ef4444">*</span></label>
          <input id="name" name="name" type="text" placeholder="í™ê¸¸ë™" required maxlength="40"/>
          <div id="name_error" style="color:red; font-size:12px; display:none;">
            ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.
          </div>
        </div>

        <!-- ì´ë©”ì¼ -->
        <div class="col-1">
          <label for="email">ì´ë©”ì¼ <span style="color:#ef4444">*</span></label>
          <input id="email" name="email" type="email" placeholder="you@example.com" required />
          <div id="email_error" style="color:red; font-size:12px; display:none;">
            ì´ë¯¸ ê°€ì…ëœ ì´ë©”ì¼ì…ë‹ˆë‹¤.
          </div>
        </div>

        <!-- ë‹‰ë„¤ì„ -->
        <div class="col-1">
          <label for="nick_name">ë‹‰ë„¤ì„ <span style="color:#ef4444">*</span></label>
          <input id="nick_name" name="nickName" type="text" placeholder="ì‚¬ìš©ìë³„ëª…" maxlength="50"/>
          <div id="nickname_error" style="color:red; font-size:12px; display:none;">
            ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”.
          </div>
        </div>

        <!-- ë¹„ë°€ë²ˆí˜¸ -->
        <div>
          <label for="password">ë¹„ë°€ë²ˆí˜¸ <span style="color:#ef4444">*</span></label>
          <input id="password" name="password" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" minlength="8" required />
          <div id="password_error" style="color:red; font-size:12px; display:none;">
            ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.
          </div>
          <div class="hint">8ì ì´ìƒ ê¶Œì¥</div>
        </div>

        <!-- ë¹„ë°€ë²ˆí˜¸ í™•ì¸ -->
        <div>
          <label for="password_confirm">ë¹„ë°€ë²ˆí˜¸ í™•ì¸ *</label>
          <input id="password_confirm" name="passwordConfirm" type="password" required minlength="8"/>
          <div id="password_confirm_error" style="color:red; font-size:12px; display:none;">
            ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
          </div>
        </div>

        <!-- ë„ë¡œëª… ì£¼ì†Œ -->
        <div class="col-1">
          <label for="road_address">ë„ë¡œëª… ì£¼ì†Œ <span style="color:#ef4444">*</span></label>
          <input id="road_address" name="roadAddress" type="text" placeholder="ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ í…Œí—¤ë€ë¡œ ..." />
          <div id="road_address_error" style="color:red; font-size:12px; display:none;">
            ë„ë¡œëª…ì„ ì…ë ¥í•˜ì„¸ìš”.
          </div>
        </div>

        <!-- ìƒì„¸ ì£¼ì†Œ -->
        <div class="col-1">
          <label for="detail_address">ìƒì„¸ ì£¼ì†Œ <span style="color:#ef4444">*</span></label>
          <input id="detail_address" name="detailAddress" type="text" placeholder="ê±´ë¬¼ëª…, ì¸µìˆ˜, í˜¸ìˆ˜ ë“±" />
          <div id="detail_address_error" style="color:red; font-size:12px; display:none;">
            ìƒì„¸ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”.
          </div>
        </div>

        <!-- ì¢Œí‘œ (ìœ„ë„/ê²½ë„) -->
        <!-- ìœ„ë„/ê²½ë„ëŠ” í…ŒìŠ¤íŠ¸í•  ë•Œë§Œ ë³´ì´ê²Œ í•´ë†“ê³  ì‹¤ì œ êµ¬í˜„í•  ë•ŒëŠ” hidden ìœ¼ë¡œ íƒ€ì„ ë°”ê¿€ ì˜ˆì • -->
        <input id="latitude" name="latitude" type="hidden" step="0.000001" placeholder="37.123456" />
        <input id="longitude" name="longitude" type="hidden" step="0.000001" placeholder="127.123456" />

        <!-- í”„ë¡œí•„ ì´ë¯¸ì§€ -->
        <div class="col-1">
          <label for="profile">í”„ë¡œí•„ ì´ë¯¸ì§€</label>
          <input id="profile" name="profileImage" type="file" accept="image/*" />
          <div class="hint">ì„ íƒ ì‚¬í•­ â€” JPG/PNG ê¶Œì¥</div>
        </div>

        <!-- ë²„íŠ¼ -->
        <div class="actions">
          <button type="submit" class="btn">ê³„ì • ë§Œë“¤ê¸°</button>
          <a class="btn secondary" href="/login" role="button">ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”?</a>
        </div>
      </div>
    </form>
  </section>

  <aside class="aside" aria-hidden="true">
    <div style="text-align:center">
      <div style="font-size:28px;font-weight:700">í™˜ì˜í•©ë‹ˆë‹¤ ğŸ‘‹</div>
      <div class="small">ê°„ë‹¨í•œ íšŒì›ê°€ì…ìœ¼ë¡œ ì‹œì‘í•´ ë³´ì„¸ìš”.</div>
    </div>

    <div style="margin-top:18px;font-size:13px;color:var(--muted);text-align:center">
      Tip: ì†Œì…œ ë¡œê·¸ì¸ìœ¼ë¡œ ë¹ ë¥¸ íšŒì›ê°€ì…ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
    </div>
  </aside>
</main>
<script>
  function initAutocomplete() {
    const input = document.getElementById("road_address");
    const options = {
      componentRestrictions: { country: "KR" },
      fields: ["formatted_address", "geometry", "name", "place_id"],
      strictBounds: false,
    };
    const autocomplete = new google.maps.places.Autocomplete(input, options);

    autocomplete.addListener('place_changed', () => {
      const place = autocomplete.getPlace();

      if (!place.place_id) {
        console.log("No details available for input: '" + place.name + "'");
        return;
      }

      const lat = place.geometry.location.lat();
      const lng = place.geometry.location.lng();

      document.getElementById("road_address").value = place.formatted_address;

      document.getElementById("latitude").value = Number(lat.toFixed(6));
      document.getElementById("longitude").value = Number(lng.toFixed(6));

      document.getElementById("detail_address").focus();

    });
  }
</script>
<script async th:src="@{'https://maps.googleapis.com/maps/api/js?key=' + ${@environment.getProperty('google.maps.api.key')} + '&libraries=places&callback=initAutocomplete'}"></script>
<script src="/user/js/user_signup.js"></script>

</body>
</html>