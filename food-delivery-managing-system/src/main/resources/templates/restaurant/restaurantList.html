<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>동네 식당 목록</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <a href="/restaurantsAddOrModify"
           style="
                position: absolute;
                bottom: 50px;
                right: 50px;
                align-content: center;
                background-color: deepskyblue;
                height: 100px;
                width: 100px;
                border-radius: 50px;
        ">식당 추가</a>
        <h1>동네 식당 목록</h1>
        <input type="checkbox" id="view-only-my">
        <label for="view-only-my">내 식당만 보기</label>

        <!-- 식당 없을 때 -->
        <div th:if="${restaurants.isEmpty()}">
            <h4>식당이 없습니다.</h4>
        </div>

        <!-- 전체 식당 -->
        <div id="all" style="display: flex;">
            <div th:each="item:${restaurants}">
                <button th:onclick="|location.href='@{/restaurants/{id}(id=${item.restaurantIdx})}'|"
                        class="card" style="margin: 10px; max-width: 500px;">
                    <div style="
                background-color: lightgray;
                border-radius: 5px;
                height: 200px;
            ">
                        image
                        <!-- image -->
                    </div>
                    <h4 th:text="${item.name}"></h4>
                    <div th:text="|내 위치와의 거리: ${item.distance}km|"></div>
                    <div th:text="|영업 시간: ${item.openAt} ~ ${item.closeAt}|"></div>
                    <div th:text="|★${item.restaurantRating}|"></div>
                    <div hidden th:text="${item.isMyRestaurant}"></div>
                </button>
            </div>
        </div>

        <!-- 내 식당만 -->
        <div id="my" style="display: none;">
            <div th:each="item:${restaurants}" th:if="${item.isMyRestaurant}">
                <button th:onclick="|location.href='@{/restaurants/{id}(id=${item.restaurantIdx})}'|"
                        class="card" style="margin: 10px; max-width: 500px;">
                    <div style="
                        background-color: lightgray;
                        border-radius: 5px;
                        height: 200px;
                    ">
                        image
                        <!-- image -->
                    </div>
                    <h4 th:text="${item.name}"></h4>
                    <div th:text="|내 위치와의 거리: ${item.distance}km|"></div>
                    <div th:text="|영업 시간: ${item.openAt} ~ ${item.closeAt}|"></div>
                    <div th:text="|★${item.restaurantRating}|"></div>
                    <div hidden th:text="${item.isMyRestaurant}"></div>
                </button>
            </div>
        </div>
    </div>
    <script>
        const allRes = document.getElementById("all");
        const myRes =  document.getElementById("my");

        document.getElementById('view-only-my').addEventListener('change', function(){
            if(this.checked){
                allRes.style.display = "none";
                myRes.style.display = "flex";
            }
            else{
                allRes.style.display = "flex";
                myRes.style.display = "none";
            }
        })
    </script>
</body>
</html>